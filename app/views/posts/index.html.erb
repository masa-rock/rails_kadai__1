<%= render "shared/header" %>
<div class="maincontainer">
  <h2 class="main_title">スケジュール一覧</h2>
  <% if flash[:notice] == "スケジュールを削除しました" || flash[:notice] == "スケジュールを登録できませんでした"|| flash[:notice] == "スケジュールを更新できませんでした" %>
  <p class="notice_delete"><%= flash[:notice] %></p>
  <% elsif flash[:notice] %>
  <p class="notice"><%= flash[:notice] %></p>
  <% end %>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>タイトル</th>
        <th>開始日</th>
        <th>終了日</th>
        <th>終日</th>
        <th>スケジュール更新日時</th>
        <th>確認</th>
        <th>編集</th>
        <th>削除</th>
      </tr>
    </thead>
    <tbody>
      <% @posts.each do |post| %>
      <tr>
        <td><%= post.id %></td>
        <td><%= post.title %></td>
        <td><%= post.start_date.to_s(:datetime_jp) %></td>
        <td><%= post.end_date.to_s(:datetime_jp) %></td>
        <td>
          <% if post.all_day %>
          ◯
          <% else %>
          <% end %>
        </td>
        <td><%= post.updated_at.to_s(:datetime_jp_minute) %></td>
        <td><%= link_to"確認",post %></td>
        <td><%= link_to"編集",[:edit,post] %></td>
        <td><%= link_to"削除",post,method: :delete,data:{confirm:"本当に削除しますか？"} %></td>
      </tr>
      <% end %>
    </tbody>
  </table>
  <p><%= link_to"スケジュール新規登録",:new_post %></p>
</div>

<footer>
  <h1>現在の日時：<%= Time.now.strftime("%Y年%m月%d日") %> スケジュール合計：<%= @posts_count%></h1>
</footer>